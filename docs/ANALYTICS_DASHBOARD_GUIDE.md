# アクセス解析ダッシュボードガイド

## 概要

PocketNaviのSEO対策とユーザー行動分析のための包括的なアクセス解析システムです。`global_search_history`テーブルを基に、詳細な分析とグラフ化を行います。

## 機能一覧

### 1. 総合統計
- **総検索数**: 期間内の全検索回数
- **ユニークセッション**: 期間内のユニークセッション数
- **ユニークIP**: 期間内のユニークIP数
- **ユニーククエリ**: 期間内のユニーク検索ワード数

### 2. グラフ分析

#### 日別アクセス推移
- 日別の検索数とユニークセッション数の推移
- トレンド分析とピーク時間の特定

#### 検索タイプ別分布
- 建築物、建築家、都道府県、テキスト検索の割合
- ドーナツチャートでの視覚化

#### 時間別アクセス
- 24時間のアクセスパターン
- ピーク時間帯の特定

#### 言語別分布
- 日本語・英語ユーザーの割合
- 国際化対応の効果測定

### 3. 詳細分析

#### 人気検索ワードランキング
- TOP 20の人気検索ワード
- 検索数、ユニークセッション、ユニークIP
- 検索タイプ別の分類

#### 地域別アクセス統計
- IPクラス別のアクセス分析
- 地域別のユーザー分布
- 占有率の可視化

## アクセス方法

### 1. 管理画面へのアクセス
```
https://your-domain.com/admin/login.php
```

### 2. 認証情報（デモ用）
- **ユーザー名**: admin
- **パスワード**: pocketnavi2025

### 3. アクセス解析画面
```
https://your-domain.com/admin/analytics_dashboard.php
```

## 分析期間の設定

### 利用可能な期間
- **過去7日間**: 短期トレンド分析
- **過去30日間**: 月次分析（デフォルト）
- **過去90日間**: 四半期分析
- **過去1年間**: 年次分析

### 期間選択の効果
- **短期**: リアルタイムな傾向把握
- **中期**: 季節性やイベントの影響分析
- **長期**: 長期的な成長トレンド分析

## SEO対策への活用

### 1. キーワード分析
- **人気検索ワード**: SEO対策の優先キーワード特定
- **検索タイプ別分析**: コンテンツ戦略の最適化
- **言語別分析**: 国際化SEOの効果測定

### 2. ユーザー行動分析
- **時間別アクセス**: コンテンツ更新の最適タイミング
- **地域別分析**: 地域特化コンテンツの効果測定
- **セッション分析**: ユーザーエンゲージメントの測定

### 3. コンテンツ最適化
- **検索タイプ別人気度**: コンテンツ作成の優先順位
- **検索ワードの多様性**: ロングテールキーワードの特定
- **ユーザー流入パターン**: コンテンツ改善の方向性

## データの活用例

### 1. コンテンツ戦略
```php
// 人気建築家の特定
SELECT query, COUNT(*) as search_count
FROM global_search_history
WHERE search_type = 'architect'
GROUP BY query
ORDER BY search_count DESC
LIMIT 10;
```

### 2. 時間帯最適化
```php
// ピーク時間帯の特定
SELECT HOUR(searched_at) as hour, COUNT(*) as searches
FROM global_search_history
GROUP BY HOUR(searched_at)
ORDER BY searches DESC;
```

### 3. 地域別分析
```php
// 地域別人気検索
SELECT 
    SUBSTRING_INDEX(ip_address, '.', 1) as region,
    query,
    COUNT(*) as searches
FROM global_search_history
GROUP BY region, query
ORDER BY searches DESC;
```

## 技術仕様

### 使用技術
- **フロントエンド**: Bootstrap 5, Chart.js, Lucide Icons
- **バックエンド**: PHP, PDO
- **データベース**: MySQL
- **グラフ**: Chart.js（Line, Bar, Pie, Doughnut）

### パフォーマンス最適化
- **インデックス**: `searched_at`, `search_type`, `user_session_id`
- **クエリ最適化**: 適切なGROUP BYとLIMIT句の使用
- **キャッシュ**: 必要に応じて結果のキャッシュ化

### セキュリティ
- **認証**: セッションベースの認証
- **SQLインジェクション対策**: PDOプリペアドステートメント
- **XSS対策**: htmlspecialchars()による出力エスケープ

## 今後の拡張予定

### 1. 高度な分析機能
- **コホート分析**: ユーザーの継続率分析
- **ファネル分析**: 検索からコンバージョンまでの流れ
- **A/Bテスト**: 機能改善の効果測定

### 2. レポート機能
- **定期レポート**: 自動生成される週次・月次レポート
- **カスタムレポート**: 特定条件での分析レポート
- **エクスポート機能**: CSV/PDF形式でのデータ出力

### 3. アラート機能
- **異常検知**: アクセス数の急激な変化の検知
- **パフォーマンス監視**: システム負荷の監視
- **SEO監視**: 検索順位の変動監視

## 運用ガイド

### 1. 定期確認項目
- **日次**: アクセス数の確認
- **週次**: 人気検索ワードの確認
- **月次**: トレンド分析とコンテンツ戦略の見直し

### 2. データ保持期間
- **詳細データ**: 1年間
- **集計データ**: 3年間
- **アーカイブ**: 長期保存

### 3. バックアップ
- **データベース**: 日次バックアップ
- **設定ファイル**: 週次バックアップ
- **ログファイル**: 月次アーカイブ

このアクセス解析システムにより、PocketNaviのSEO対策とユーザー体験の向上をデータドリブンで実現できます。
